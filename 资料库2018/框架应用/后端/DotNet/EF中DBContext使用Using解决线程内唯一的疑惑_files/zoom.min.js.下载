+function(n){"use strict";function i(){this._activeZoom=this._initialScrollPosition=this._initialTouchPosition=this._touchMoveListener=null;this._$document=n(document);this._$window=n(window);this._$body=n(document.body);this._boundClick=n.proxy(this._clickHandler,this)}function t(t){this._fullHeight=this._fullWidth=this._overlay=this._targetImageWrap=null;this._targetImage=t;this._$body=n(document.body)}i.prototype.listen=function(){this._$body.on("click",'[data-action="zoom"]',n.proxy(this._zoom,this))};i.prototype._zoom=function(i){var r=i.target;if(r&&r.tagName=="IMG"&&!this._$body.hasClass("zoom-overlay-open")){if(i.metaKey||i.ctrlKey)return window.open(i.target.getAttribute("data-original")||i.target.src,"_blank");if(!(r.width>=n(window).width()-t.OFFSET)){this._activeZoomClose(!0);this._activeZoom=new t(r);this._activeZoom.zoomImage();this._$document.on("keyup.zoom",n.proxy(this._keyHandler,this));this._$document.on("touchstart.zoom",n.proxy(this._touchStart,this));document.addEventListener?document.addEventListener("click",this._boundClick,!0):document.attachEvent("onclick",this._boundClick,!0);"bubbles"in i?i.bubbles&&i.stopPropagation():i.cancelBubble=!0}}};i.prototype._activeZoomClose=function(n){this._activeZoom&&(n?this._activeZoom.dispose():this._activeZoom.close(),this._$window.off(".zoom"),this._$document.off(".zoom"),document.removeEventListener("click",this._boundClick,!0),this._activeZoom=null)};i.prototype._scrollHandler=function(){this._initialScrollPosition===null&&(this._initialScrollPosition=n(window).scrollTop());var t=this._initialScrollPosition-n(window).scrollTop();Math.abs(t)>=40&&this._activeZoomClose()};i.prototype._keyHandler=function(n){n.keyCode==27&&this._activeZoomClose()};i.prototype._clickHandler=function(n){n.preventDefault?n.preventDefault():event.returnValue=!1;"bubbles"in n?n.bubbles&&n.stopPropagation():n.cancelBubble=!0;this._activeZoomClose()};i.prototype._touchStart=function(t){this._initialTouchPosition=t.touches[0].pageY;n(t.target).on("touchmove.zoom",n.proxy(this._touchMove,this))};i.prototype._touchMove=function(t){Math.abs(t.touches[0].pageY-this._initialTouchPosition)>10&&(this._activeZoomClose(),n(t.target).off("touchmove.zoom"))};t.OFFSET=80;t._MAX_WIDTH=2560;t._MAX_HEIGHT=4096;t.prototype.zoomImage=function(){var t=document.createElement("img");t.onload=n.proxy(function(){this._fullHeight=Number(t.height);this._fullWidth=Number(t.width);this._zoomOriginal()},this);t.src=this._targetImage.src};t.prototype._zoomOriginal=function(){this._targetImageWrap=document.createElement("div");this._targetImageWrap.className="zoom-img-wrap";this._targetImage.parentNode.insertBefore(this._targetImageWrap,this._targetImage);this._targetImageWrap.appendChild(this._targetImage);n(this._targetImage).addClass("zoom-img").attr("data-action","zoom-out");this._overlay=document.createElement("div");this._overlay.className="zoom-overlay";document.body.appendChild(this._overlay);this._calculateZoom();this._triggerAnimation()};t.prototype._calculateZoom=function(){this._targetImage.offsetWidth;var i=this._fullWidth,u=this._fullHeight,h=n(window).scrollTop(),r=i/this._targetImage.width,f=n(window).height()-t.OFFSET,e=n(window).width()-t.OFFSET,o=i/u,s=e/f;this._imgScaleFactor=this._fullWidth>1366||this._fullHeight>968?r:i<e&&u<f?r:o<s?f/u*r:e/i*r};t.prototype._triggerAnimation=function(){var t,i;this._targetImage.offsetWidth;var r=n(this._targetImage).offset(),u=n(window).scrollTop(),f=u+n(window).height()/2,e=n(window).width()/2,o=r.top+this._targetImage.height/2,s=r.left+this._targetImage.width/2;this._translateY=f-o;this._translateX=e-s;t="scale("+this._imgScaleFactor+")";i="translate("+this._translateX+"px, "+this._translateY+"px)";n.support.transition&&(i+=" translateZ(0)");this._fullHeight>968||this._fullWidth>1366?n(this._targetImage).css({"-webkit-transform":t,"-ms-transform":t,transform:t,top:-this._translateY}):n(this._targetImage).css({"-webkit-transform":t,"-ms-transform":t,transform:t});n(this._targetImageWrap).css({"-webkit-transform":i,"-ms-transform":i,transform:i});this._$body.addClass("zoom-overlay-open")};t.prototype.close=function(){if(this._$body.removeClass("zoom-overlay-open").addClass("zoom-overlay-transitioning"),n(this._targetImage).css({"-webkit-transform":"","-ms-transform":"",transform:""}),n(this._targetImageWrap).css({"-webkit-transform":"","-ms-transform":"",transform:""}),!n.support.transition)return this.dispose();n(this._targetImage).one(n.support.transition.end,n.proxy(this.dispose,this)).emulateTransitionEnd(300)};t.prototype.dispose=function(){this._targetImageWrap&&this._targetImageWrap.parentNode&&(n(this._targetImage).removeClass("zoom-img").attr("data-action","zoom"),this._targetImageWrap.parentNode.replaceChild(this._targetImage,this._targetImageWrap),this._overlay.parentNode.removeChild(this._overlay),this._$body.removeClass("zoom-overlay-transitioning"))};n(function(){(new i).listen()})}(jQuery)+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(i.style[t]!==undefined)return{end:n[t]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one("bsTransitionEnd",function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){(n.support.transition=t(),n.support.transition)&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery);